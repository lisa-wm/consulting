## Bag-of-n-grams in Python
```{r, include=FALSE, cache=FALSE}
ap = adjust_path(paste0(getwd(), "/figure"))
```

__Create a Document-Term-Matrix including n-grams:__

- _Step 1:_ Set up your corpus as a list of strings  
(No additional steps needed compared to Bag-of-words)
- _Step 2:_ Inialize the ``CountVectorizer`` with __additional__ model parameters
- _Step 3:_ Apply the ``.fit_transform()``-function of the ``CountVectorizer`` to your corpus

## Bag-of-n-grams in Python

__We will use the exemplary corpus from before:__

```{python}
a = "i like watching football on tv"
b = "football players play football every saturday"
corpus = [a, b]
```  

__Initialize the model:__

```{python}
from sklearn.feature_extraction.text import CountVectorizer

vectorizer = CountVectorizer(lowercase = True, ngram_range = (1,2), 
                    stop_words = None, analyzer = "word", max_df = 1.0, 
                    min_df = 1, max_features = None, binary = False)
```

## Bag-of-n-grams in Python

__Create the DTM:__

```{python, eval = F}
dtm = vectorizer.fit_transform(corpus)

dtm.toarray()

## array([[0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
##        [1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0]],
##       dtype=int64)
```

\vspace{.5cm}

__Question:__  
What are the dimensions of the DTM right now? 
  
## Bag-of-n-grams in Python
  
  ```{python, eval = F}
vectorizer.get_feature_names()

## ['every',
##  'every saturday',
##  'football',
##  'football every',
##  'football on',
##  'football players',
##  'like',
##  'like watching',
##  'on',
##  'on tv',
##  'play',
##  'play football',
##  'players',
##  'players play',
##  'saturday',
##  'tv',
##  'watching',
##  'watching football']]
```


## Bag-of-n-grams in Python

__Dimensions of the DTM:__

- Bag-of-words $(2 \times 9)$
  
  ```{python, eval = F}
dtm = vectorizer.fit_transform(corpus)

dtm.toarray()

## array([[0, 1, 1, 1, 0, 0, 0, 1, 1],
##       [1, 2, 0, 0, 1, 1, 1, 0, 0]], dtype=int64)
```

- Bag-of-n-grams $(2 \times 18)$
  
  ```{python, eval = F}
dtm = vectorizer.fit_transform(corpus)

dtm.toarray()

## array([[0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1],
##        [1, 1, 2, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0]],
##       dtype=int64)
```
